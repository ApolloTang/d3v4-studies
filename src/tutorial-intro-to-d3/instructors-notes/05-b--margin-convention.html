<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>margin convention</title>
  <style type="text/less">
    * { margin: 0; padding: 0; box-sizing: border-box; }
  </style>
</head>

<body>
  <div class="chart">
    Chart has not being loaded
  </div>
  <script src="http://localhost:9091/less/dist/less.js"></script>
  <script src="http://localhost:9091/lodash/lodash.js"></script>
  <script src="http://localhost:9091/chance/chance.js"></script>
  <script src="http://localhost:9091/d3/d3.js"></script>
  <script src="http://localhost:9091/d3/d3-selection-multi.v1.js"></script>
  <script>

    //Ref: http://bl.ocks.org/binaworks/9dce0a385915e8953a45cc6be7fbde42

    // ---------------------------------------------------------------
    //@@ svg configuration
    const svgDim = {w: 500, h:200};
    const svgMarg = {t: 20, r:20, b:20, l:20};

    const stageDim = {
      w: svgDim.w - svgMarg.r - svgMarg.l,
      h: svgDim.h - svgMarg.t - svgMarg.b
    };

    //@@ chart container
    const chart =d3.select('.chart');
    chart.text('');
    chart
      .styles({
      width: svgDim.w+'px',
      height: svgDim.h+'px',
      outline: '1px solid red'
    });

    //@@ svg
    const svg = chart.append('svg')
    svg
      .styles({
      width: '100%',
      height: '100%',
    });

    //@@ stage
    const stage = svg.append('g')
    stage
      .attr('transform', `translate(${svgMarg.l},${svgMarg.t})`)

    //@@ stage background
    const stageBackground = stage.append('rect');
    stageBackground
      .styles({
        width: stageDim.w,
        height: stageDim.h,
        fill: 'hsl(120, 10%, 90%)'
      })

    // -------------------------------------------------------------------

  </script>
</body>

</html>
