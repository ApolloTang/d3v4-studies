<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>margin convention</title>
  <style type="text/less">
    * { margin: 0; padding: 0; box-sizing: border-box; }
  </style>
</head>

<body>
  <div class="chart">
    Chart has not being loaded
  </div>
  <script src="http://localhost:9091/less/dist/less.js"></script>
  <script src="http://localhost:9091/lodash/lodash.js"></script>
  <script src="http://localhost:9091/chance/chance.js"></script>
  <script src="http://localhost:9091/d3/d3.js"></script>
  <script src="http://localhost:9091/d3/d3-selection-multi.v1.js"></script>
  <script>

    //@@ Svg configuration
    const svgDim = {w:500, h:200};
    const svgMarg = {t:20, r:20, b:20, l:20};

    const stageDim = {
      w: svgDim.w - svgMarg.r - svgMarg.l,
      h: svgDim.h - svgMarg.t - svgMarg.b,
    };

    //@@ Chart container
    const chart = d3.select('.chart')

    chart.text(''); // remove text

    chart
      .styles( {
        'width': svgDim.w+'px',
        'height': svgDim.h+'px',
        'outline': '1px solid red'
      });

    //@@ svg element
    const svg = chart.append('svg');
    svg
      .styles( {
        'width': '100%',
        'height': '100%',
        'outline': '1px solid red'
      });

    //@@ Stage
    const stage = svg
      .append('g')
      .attr('transform', `translate(${svgMarg.l}, ${svgMarg.t})`)

    //@@ Stage background
    const stageBg = stage
      .append('rect')
      .styles({
        width: stageDim.w,
        height: stageDim.h
      })

  </script>
</body>

</html>
